"use client";
import dynamic from "next/dynamic";
import React, { useEffect, useState } from "react";
import ChartOne from "../Charts/ChartOne";
import ChartTwo from "../Charts/ChartTwo";
import CardDataStats from "../CardDataStats";
import toast from "react-hot-toast";
import { getApi } from "../../../functions/API";

const MapOne = dynamic(() => import("../Maps/MapOne"), {
  ssr: false,
});

const ChartThree = dynamic(() => import("../Charts/ChartThree"), {
  ssr: false,
});

const ECommerceAdmin: React.FC = () => {
  const [dashBord, setDashBord] = useState(null);
  useEffect(() => {
    const getDashBordData = async () => {
      try {
        const response = await getApi("/apis/admin/dashboard");
        setDashBord(response.data);
      } catch (error) {
        toast(`${error.response.data.error}`);
      }
    };
    getDashBordData();
  }, []);

  if (!dashBord) {
    // Display loading state or placeholder content
    return <div className="text-center py-10">Loading Dashboard data...</div>;
  }
  return (
    <>
      <div className="grid grid-cols-1 gap-4 md:grid-cols-2 md:gap-6 xl:grid-cols-4 2xl:gap-7.5">
        <CardDataStats
          title="Total parcel"
          total={`${dashBord.totalParcel}`}
          rate="0.43%"
          levelUp
        >
          <svg
            width="17"
            height="16"
            viewBox="0 0 17 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M14.1664 1.24444L14.0744 1.15556C13.3385 0.444445 12.2346 0 11.2227 0H5.3354C4.32351 0 3.31163 0.444445 2.48372 1.15556L2.39173 1.24444L0.827907 3.37778C0.275969 4.17778 0 5.06667 0 5.95556V12.4444C0 14.4 1.65581 16 3.67959 16H12.8786C14.9023 16 16.5581 14.4 16.5581 12.4444V5.95556C16.5581 5.06667 16.2822 4.17778 15.7302 3.37778L14.1664 1.24444ZM2.29974 4.44444L3.77158 2.4C4.23152 1.95556 4.78346 1.77778 5.3354 1.77778H11.1307C11.6827 1.77778 12.2346 1.95556 12.6946 2.4L14.2584 4.44444H10.3948H6.16331H2.29974ZM9.47494 6.22222V8.44444L8.64703 8.08889C8.55504 8 8.37106 8 8.27907 8C8.18708 8 8.0031 8 7.91111 8.08889L7.0832 8.44444V6.22222H9.47494ZM14.7183 12.4444C14.7183 13.4222 13.8904 14.2222 12.8786 14.2222H3.67959C2.6677 14.2222 1.83979 13.4222 1.83979 12.4444V6.22222H5.24341V9.77778C5.24341 10.0444 5.42739 10.4 5.70336 10.4889C5.97933 10.6667 6.2553 10.6667 6.53127 10.5778L8.27907 9.86667L10.0269 10.5778C10.1189 10.6667 10.3028 10.6667 10.3948 10.6667C10.5788 10.6667 10.7628 10.5778 10.8548 10.4889C11.1307 10.3111 11.3147 10.0444 11.3147 9.77778V6.22222H14.7183V12.4444Z"
              className="fill-primary"
            />
          </svg>
        </CardDataStats>
        <CardDataStats
          title="Total Delivered"
          total={`${dashBord.totalDelivered}`}
          rate="4.35%"
          levelUp
        >
          <svg
            width="19"
            height="16"
            viewBox="0 0 19 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M17.1453 2.97102L14.6865 1.87774L6.92429 5.52693V7.87027L5.57019 7.26817V4.92483L13.3324 1.27566L10.7252 0.11641C10.3761 -0.0388033 9.80488 -0.0388033 9.4558 0.11641L3.03581 2.97102C2.52437 3.19843 2.10698 3.84247 2.10828 4.40219L2.11829 8.6321C2.52074 8.50261 2.94893 8.43112 3.39387 8.43112C5.69575 8.43112 7.5687 10.3041 7.5687 12.6062C7.5687 13.2075 7.43838 13.7781 7.20855 14.295L9.47544 15.2641C9.81315 15.4084 10.3657 15.4084 10.7034 15.2641L17.1088 12.5268C17.6289 12.3045 18.0556 11.6599 18.0569 11.0942L18.0728 4.40216C18.0741 3.84244 17.6567 3.19841 17.1453 2.97102ZM14.6665 7.82754L15.5365 5.99224C15.6243 5.80699 15.8444 5.70012 15.9325 5.80059L16.8252 6.81824C16.9144 6.91986 16.8013 7.15126 16.6224 7.23424L16.2466 7.40856L16.239 10.0524C16.2387 10.1679 16.1367 10.3054 16.0114 10.3595L15.4489 10.6023C15.3256 10.6555 15.2258 10.6062 15.2258 10.4922L15.2239 7.88303L14.8599 8.05188C14.6887 8.13129 14.5816 8.00679 14.6665 7.82754ZM11.459 9.32719L12.2497 7.58258C12.3294 7.40661 12.5333 7.30759 12.6165 7.40505L13.4591 8.39205C13.5432 8.49056 13.4405 8.71036 13.2749 8.7872L12.9269 8.94861L12.9494 11.4802C12.9504 11.5909 12.8568 11.7212 12.7407 11.7714L12.2191 11.9965C12.1047 12.0459 12.0111 11.9973 12.0098 11.888L11.9793 9.38832L11.6417 9.54489C11.483 9.61851 11.3818 9.49773 11.459 9.32719ZM17.2433 10.7544C17.2429 10.8124 17.1907 10.8813 17.1267 10.9081L11.1689 13.4111C11.1133 13.4344 11.0676 13.41 11.0668 13.3564L11.0622 13.0652C11.0614 13.0116 11.1058 12.9488 11.1614 12.9251L17.1299 10.3826C17.194 10.3553 17.2457 10.3804 17.2453 10.4386L17.2433 10.7544ZM3.39381 9.21235C1.51947 9.21235 0 10.7318 0 12.6062C0 14.4805 1.51947 16 3.39381 16C5.26815 16 6.78762 14.4805 6.78762 12.6062C6.78765 10.7318 5.26815 9.21235 3.39381 9.21235ZM5.61144 11.9089L3.52292 14.2584C3.42003 14.3742 3.27678 14.4336 3.13249 14.4336C3.01788 14.4336 2.90266 14.3961 2.80653 14.3191L1.50122 13.2749C1.27608 13.0949 1.23952 12.7663 1.41974 12.5412C1.59973 12.3158 1.9285 12.2793 2.15361 12.4596L3.07181 13.1941L4.83107 11.2149C5.02239 10.9995 5.35255 10.9799 5.56809 11.1716C5.78366 11.3633 5.80304 11.6932 5.61144 11.9089Z"
              fill="#00B04F"
            />
          </svg>
        </CardDataStats>
        <CardDataStats
          title="Total Pending"
          total={`${dashBord.totalPending}`}
          rate="2.59%"
          levelUp
        >
          <svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M8 0C3.58067 0 0 3.5831 0 8C0 12.4169 3.5831 16 8 16C12.4193 16 16 12.4169 16 8C16 3.5831 12.4169 0 8 0ZM8 14.2255C4.56761 14.2255 1.77697 11.4348 1.77697 8.00243C1.77697 4.57004 4.56761 1.7794 8 1.7794C11.4324 1.7794 14.223 4.57004 14.223 8.00243C14.223 11.4348 11.43 14.2255 8 14.2255Z"
              fill="#AA9C00"
            />
            <path
              d="M8.89195 4.44116H7.11255V8.36459L10.0418 11.2938L11.2985 10.037L8.89195 7.63047V4.44116Z"
              fill="#AA9C00"
            />
          </svg>
        </CardDataStats>
        <CardDataStats
          title="Total Cancelled"
          total={`${dashBord.totalCancelled}`}
          rate="0.95%"
          levelDown
        >
          <svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M8 16C3.58154 16 0 12.4185 0 8C0 3.58154 3.58154 0 8 0C12.4185 0 16 3.58154 16 8C16 12.4185 12.4185 16 8 16ZM11.6683 5.66708C11.8185 5.51692 11.8185 5.27262 11.6683 5.12246L10.8511 4.30585C10.7009 4.15569 10.4566 4.15569 10.3065 4.30585L7.992 6.62031L5.67754 4.30585C5.52738 4.15569 5.28308 4.15569 5.13292 4.30585L4.31569 5.12246C4.16554 5.27262 4.16554 5.51692 4.31569 5.66708L6.63077 7.98215L4.31569 10.296C4.16554 10.4462 4.16554 10.6905 4.31569 10.8406L5.13292 11.6578C5.28308 11.808 5.52738 11.808 5.67754 11.6578L7.992 9.34277L10.3065 11.6578C10.4566 11.808 10.7009 11.808 10.8511 11.6578L11.6683 10.8406C11.8185 10.6905 11.8185 10.4462 11.6683 10.296L9.35323 7.98215L11.6683 5.66708Z"
              fill="#EB0D0D"
            />
          </svg>
        </CardDataStats>
      </div>

      <div className="mt-4 grid grid-cols-12 gap-4 md:mt-6 md:gap-6 2xl:mt-7.5 2xl:gap-7.5">
        <ChartOne />
        <ChartTwo />
        <ChartThree />
        <MapOne />
      </div>
    </>
  );
};

export default ECommerceAdmin;
